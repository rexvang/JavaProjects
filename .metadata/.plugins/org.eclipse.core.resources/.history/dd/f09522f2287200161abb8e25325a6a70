import java.util.HashMap;
import java.util.Map;
import java.util.Set;

public class Inventory {
	private int maxLoad;
	private Map<Item,Integer> inventory;

	public Inventory(int carryWeight) {
		setMaxLoad(carryWeight);
	}

	public int getMaxLoad() {
		return maxLoad;
	}
	public void setMaxLoad(int maxLoad) {
		this.maxLoad = maxLoad;
	}

	public Map<Item,Integer> getInventory() {
		return inventory;
	}

	public void setInventory() {
		this.inventory = new HashMap<Item,Integer>();
	}
	
	public int addItem(Item item, int quantity) {
		if(getWeight() < maxLoad) {
			if(inventory.containsKey(item)) {
				// Append more to existing item
				inventory.replace(item, inventory.get(item)+quantity);
			} else {
				inventory.put(item, quantity);
			}
			return 0;
		} else {
			return -1;
		}
	}
	
	/**
	 * Removes quantity specified of Item object from the inventory if 
	 * quantity is less than current quantity in inventory. Otherwise
	 * removes all of Item object.
	 * 
	 * @param item The Item object that you want to manipulate
	 * @param quantity The quantity you want to remove
	 */
	public void removeItem(String itemName, int quantity) {
		Item item = getItem(itemName);
		if(item != null) {
			if(quantity >= inventory.get(item)) {
				inventory.remove(item);
			} else {
				inventory.replace(item, quantity);
			}
		}
	}
	
	public int getWeight() {
		int weight = 0;
		Set<Item> items = inventory.keySet();
		while(items.iterator().hasNext()) {
			Item item = items.iterator().next();
			weight += item.getWeight() * inventory.get(item);
		}
		return weight;
	}
	
	/**
	 * Get Item object from inventory by item name.
	 * @param itemName The name of the Item object.
	 * @return The Item object or null if not found.
	 */
	public Item getItem(String itemName) {
		Set<Item> items = inventory.keySet();
		Item item = null;
		boolean found = false;
		while(items.iterator().hasNext() || !found) {
			 item = items.iterator().next();
			 if(item.getName().equals(itemName)) {
				 found = true;
			 }
		}
		
		return item;
	}
}
